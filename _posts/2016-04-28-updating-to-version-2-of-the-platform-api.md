---
ID: 2939
post_title: >
  Updating to version 2 of the Platform
  API
author: David Parker
post_date: 2016-04-28 12:29:56
post_excerpt: ""
layout: post
permalink: >
  https://nextstage.torolab.ibm.com/iotplatform/2016/04/28/updating-to-version-2-of-the-platform-api/
published: true
---
The version 2 API was introduced in September 2015.  This article is for people who are still using the version 1 API and are looking to update.  <br />When migrating applications to the version 2 APIs it is important to understand the changes that have been made, both in the structure of the API and the format of the response.<br /><h3>Organization Management</h3><p>Minor restructuring has taken place with the response format to group information about the related Bluemix organization, the following attributes have been removed:</p><ul><li>bluemixRegion</li><li>bluemixOrganizationGuid</li><li>bluemixSpaceGuid</li><li>bluemixPlanId</li></ul>They are replaced by the following corresponding attributes:<br /><br /><ul><li>bluemix.region</li><li>bluemix.organizationGuid</li><li>bluemix.spaceGuid</li><li>bluemix.planId</li></ul><h3>Device &amp; Device Type Registration</h3><b></b>In the version 1 API a device was registered by a HTTP POST to /api/v0001/devices with a body containing two required attributes:<br /><br /><ul><li>type</li><li>id</li></ul>In the version 1 API a device type was just a property of a device, there was no metadata about the device type.  The version 2 API introduced a richer model that includes the ability to store information about the device types themselves, because of this a device cannot be registered until after a device type has been created.<br /><br />A device type is created by a HTTP POST to <a href="https://docs.internetofthings.ibmcloud.com/swagger/v0002.html#!/Device_Types/post_device_types">/api/v0002/device/types</a> with a body containing one required attribute:<br /><br /><ul><li>id</li></ul>After the device type has been created the device can be registered by a HTTP POST to <a href="https://docs.internetofthings.ibmcloud.com/swagger/v0002.html#!/Devices/post_device_types_typeId_devices">/api/v0002/device/types/<strong>$myTypeId</strong>/devices</a> with a body containing one required attribute:<br /><br /><ul><li>deviceId</li></ul><h3>Device information retrieval</h3>To lookup the information about a device in the version 1 API you would issue a HTTP GET request to /api/v0001/devices/<strong>$myTypeId</strong>/<strong>$myDeviceId</strong>.  In the version 2 API the GET request must be made to <a href="https://docs.internetofthings.ibmcloud.com/swagger/v0002.html#!/Devices/get_device_types_typeId_devices_deviceId">/api/v0002/device/types/<strong>$myTypeId</strong>/devices/<strong>$myDeviceId</strong></a>.  The response format has also changed, the primary changes you need to be aware of is the rename of the following 3 attributes:<br /><br /><ul><li><span class="attribute"><strong>uuid</strong> is now<strong> clientId</strong></span></li><li><span class="attribute"><strong>type</strong> is now <strong>typeId</strong></span></li><li><span class="attribute"><strong>id</strong> is now <strong>deviceId</strong></span></li></ul><h3>Updating and removing devices</h3>In the version 1 API the device resource URI was <span>/api/v0001/devices/</span><strong>$myTypeId</strong><span>/</span><strong>$myDeviceId</strong>, as with the device information retrieval HTTP PUT<b> </b>and DELETE requests need to be sent to <a href="https://docs.internetofthings.ibmcloud.com/swagger/v0002.html#!/Devices/put_device_types_typeId_devices_deviceId"><span>/api/v0002/device/types/</span><strong>$myTypeId</strong><span>/devices/</span><strong>$myDeviceId</strong></a><span><span> instead when working with the new version of the API.  Updates to devices through the version 2 API also support partial updates, allowing you to submit only the information that has changed about the device rather than the entire device document.<br /></span></span><h3>Device listings</h3><span><span>Under the version 1 APIs there were two ways to get lists of devices.  <br /><br />A list of every device in your organization could be obtained with a HTTP GET request to /api/v0001/devices, in the version 2 API this request should instead go to <a href="https://docs.internetofthings.ibmcloud.com/swagger/v0002.html#!/Bulk_Operations/get_bulk_devices">/api/v0002/bulk/devices</a>.  The version 1 API returned a simple array of device records, the version 2 API provides additional metadata for the listing, and returns the actual device list in the <strong>results</strong> attribute of the response. <br /><br />A list of every device of a certain type could be obtained with a HTTP GET request to /api/v0001/devices/<strong>$myTypeId</strong>, when updating to the version 2 of the API this request must be changed to <a href="https://docs.internetofthings.ibmcloud.com/swagger/v0002.html#!/Devices/get_device_types_typeId_devices">/api/v0002/device/types/<strong>$myTypeId</strong>/devices</a>.  The same changes mentioned previously apply here as well, the device listing will be returned in the <strong>results</strong> attribute of the JSON response.<br /></span></span><h3>Summary</h3><span>These are the main changes that an application developer will face when updating an existing application to utilize the version 2 platform API.  The version 2 API also brings with it a wealth of new features to take advantage of, for full details of all the new features refer to the <a href="https://docs.internetofthings.ibmcloud.com/applications/api.html">online documentation</a>.  We have a number of open source client libraries supporting multiple programming languages available in <a href="https://github.com/ibm-watson-iot/">GitHub</a>, all of which have full support for the current version 2 API.  <br />If you have any questions about updating your own code to work with the version 2 APIs that were not covered here please post a question in <a href="https://nextstage.torolab.ibm.com/answers/smart-spaces/17/internet-of-things.html">dW Answers</a> and we will do our best to assist you.<br /></span>